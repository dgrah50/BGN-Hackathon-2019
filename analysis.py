

from __future__ import division
import sys, csv, nltk, re, string, heapq, gensim
from nltk.corpus import stopwords
from nltk.tokenize import TweetTokenizer
from collections import Counter
from prettytable import PrettyTable
from textblob import TextBlob
from gensim.models.doc2vec import Doc2Vec, TaggedDocument
from sklearn.cluster import KMeans
from gensim import corpora, models
from nltk.stem.wordnet import WordNetLemmatizer

sw = stopwords.words('english')
lemma = WordNetLemmatizer()


def fetchTweetsFromFile(twitter_data):
    fields = []
    rows = []

    with open(twitter_data, 'r') as csvfile:
        csvreader = csv.reader(csvfile, delimiter=';')

        # This skips the first row of the CSV file.
        # https://evanhahn.com/python-skip-header-csv-reader/
        next(csvreader)

        for row in csvreader:
            rows.append(row)
        print
        "Total no. of tweets: {}".format(csvreader.line_num - 2)

    return rows


def clean_text_and_tokenize(line):
    line = re.sub(r'\$\w*', '', line)  # Remove tickers
    line = re.sub(r'http?:.*$', '', line)
    line = re.sub(r'https?:.*$', '', line)
    line = re.sub(r'pic?.*\/\w*', '', line)
    line = re.sub(r'[' + string.punctuation + ']+', ' ', line)  # Remove puncutations like 's

    tokens = TweetTokenizer(strip_handles=True, reduce_len=True).tokenize(line)
    tokens = [w.lower() for w in tokens if w not in sw and len(w) > 2 and w.isalpha()]
    tokens = [lemma.lemmatize(word) for word in tokens]

    return tokens


def getCleanedWords(lines):
    words = []

    for line in lines:
        words += clean_text_and_tokenize(line)
    return words


def lexical_diversity(tokens):
    return 1.0 * len(set(tokens)) / len(tokens)


# Helper function for computing number of words per tweet
def average_words(lines):
    total_words = sum([len(s.split()) for s in lines])
    return 1.0 * total_words / len(lines)


def top_words(words, top=5):
    pt = PrettyTable(field_names=['Words', 'Count'])
    c = Counter(words)

    [pt.add_row(kv) for kv in c.most_common()[:top]]
    pt.align['Words'], pt.align['Count'] = 'l', 'r'  # Set column alignment
    # print (pt)
    # print(words)
    return(c)

def popular_tweets(tweet_rows, top=5):
    popular = []
    for row in tweet_rows:
        if len(row) >= 8:
            popular.append([row[8], int(row[2]) + int(row[3]), row[4], row[9]])
    topTweets = heapq.nlargest(
        top, popular, key=lambda e: e[1])  # ref sof -> 2243542

    print("\nPrinting top {} tweets".format(top))
    counter = 0
    for (id, popularity, tweet, url) in topTweets:
        counter += 1
        print("{}. {}".format(counter, tweet))
        print("Popularity = {}".format(popularity))
        print("Link = {}".format(url))
        print("-------------------")


def clean_tweet(tweet):
    return " ".join(clean_text_and_tokenize(tweet))


def sentiment_analysis_basic(tweets):
    positive_tweets = 0
    neutral_tweets = 0
    negative_tweets = 0

    for tweet in tweets:
        analysis = TextBlob(tweet)
        sentiment = analysis.sentiment.polarity

        if sentiment > 0:
            positive_tweets += 1
        elif sentiment == 0:
            neutral_tweets += 1
        else:
            negative_tweets += 1
    total_tweets_analysed = positive_tweets + neutral_tweets + negative_tweets
    positive_tweets_percentage = positive_tweets / total_tweets_analysed * 100
    neutral_tweets_percentage = neutral_tweets / total_tweets_analysed * 100
    negative_tweets_percentage = negative_tweets / total_tweets_analysed * 100
    return positive_tweets_percentage, neutral_tweets_percentage, negative_tweets_percentage
    # ("\nNo. of positive tweets = {} Percentage = {}".format(positive_tweets, positive_tweets_percentage))
    # print("No. of neutral tweets  = {} Percentage = {}".format(
    #     neutral_tweets, neutral_tweets_percentage))
    # print(
    # "No. of negative tweets = {} Percentage = {}".format(
    #     negative_tweets, 100 - (positive_tweets_percentage + neutral_tweets_percentage)))


# sof -> 20078816
def remove_non_ascii(text):
    return ''.join(i for i in text if ord(i) < 128)


def clusterTweetsKmeans(tweets):
    taggeddocs = []
    tag2tweetmap = {}
    for index, i in enumerate(tweets):
        if len(i) > 2:  # Non empty tweets
            tag = u'SENT_{:d}'.format(index)
            sentence = TaggedDocument(
                words=gensim.utils.to_unicode(i).split(), tags=[tag])
            tag2tweetmap[tag] = i
            taggeddocs.append(sentence)

    model = Doc2Vec(
        taggeddocs, dm=0, alpha=0.025, size=20, min_alpha=0.025, min_count=0)
    print(" ")
    for epoch in range(60):
        model.train(
            taggeddocs, total_examples=model.corpus_count, epochs=model.iter)
        model.alpha -= 0.002  # decrease the learning rate
        model.min_alpha = model.alpha  # fix the learning rate, no decay

    dataSet = model.docvecs.doctag_syn0  # this works, thanks a lot sof -> 43476869
    kmeansClustering = KMeans(n_clusters=5)
    centroidIndx = kmeansClustering.fit_predict(dataSet)
    topic2wordsmap = {}
    for i, val in enumerate(dataSet):
        tag = model.docvecs.index_to_doctag(i)
        topic = centroidIndx[i]
        if topic in topic2wordsmap.keys():
            for w in (tag2tweetmap[tag].split()):
                topic2wordsmap[topic].append(w)
        else:
            topic2wordsmap[topic] = []
    for i in topic2wordsmap:
        print(
            "Topic {} has words: {}".format(i + 1, ' '.join(remove_non_ascii(word) for word in topic2wordsmap[i][:10])))


def main():
    # twitter_data = "/tmp/data.csv"
    # tweet_rows = fetchTweetsFromFile(twitter_data)

    # for tweet in tweet_rows:
    #     print(tweet)
    #tweets = [row[0] for row in tweet_rows]
    tweets = ['@mxcchi I am doing Coffee Wed morning in West Village. DM me your contact info so we can plan this thing.', '#starbucks 久しぶり @ Starbucks Coffee 国立店 https://instagram.com/p/919lb9KXvs/\xa0', "@AndrewSzewc Awesome! Bring extra money for coffee and cookies! Hopefully we'll see you there!", '★openしました★\n店内で飲めるようになりました。\n新メニュー\nクレソンとジャガイモのポタージュ\nクレソンは函館山の麓で有機栽培している物を頂きました。\n本日のcoffee\nスペシャリティ… https://instagram.com/p/919k8fi9fx/\xa0', "I drink my coffee black. I'm a grown man, and I do grown man stuff.", '"you were my cup of tea. I drink coffee now"', '#Wow what a #sunnyday blinded by the light during a #coffee #coffeebreak https://instagram.com/p/919kGvBhBu/\xa0', 'image of coffee cup with notebook and pen on an old wooden\xa0table. http://lightinthedark.net/product/image-of-coffee-cup-with-notebook-and-pen-on-an-old-wooden-table/\xa0…', 'Morning coffee... pic.twitter.com/jyhb7QMLjR', 'International Delight makes my cup of coffee a masterpiece! Make your own: http://ln.is/com/2WFtG\xa0 #CreateDelight', "Yesterday's coffee date right after dinner date thebookcafesg My friend ordered this Hot Cocoa with… https://instagram.com/p/919ipJsOaM/\xa0", '“You’re the kind of person I wanna drink morning coffee with.”', "can't decide if i need a hug, cup of coffee, couple shots of vodka or 2 weeks of sleep", 'Breakfast with coffee, and reading @ecomso on Entrepreneurship & Startups ;6', 'Oh and I get to start my day with a free coffee! Thanks boys! @buffalobills', '#win a @beanies_flavour Coffee in my latest giveaway with @SerenityYou at http://serenityyou.com/2015/10/my-beanies-coffee.html\xa0… #competition #giveaway', 'Coffee makes me happy', 'Also gift cards to Village Coffee will be accepted', 'Getting my caffeine fix. @ Bulletproof Coffee https://instagram.com/p/919hFGEC6p/\xa0', '#good_morning#coffee#aroma#love#music#bunny#every_morning… https://instagram.com/p/919g5aDMY0/\xa0', 'Girl frosted coffee , TRY IT. I love it , it was my addiction but now that I’m making better choices i can’t have it ', 'Sure you can’t even have a cup of coffee without the cunts trying take over yeno', 'Hike and Waffles update: It is touch and go. We are moving ahead with the event and will figure out a route or activity in the A.M. worst case we share a coffee and a waffle.  Best case Scenario you have studded tires or boots!!', 'coffee', "#TheGoodPlace Season 3 finale BROKE me! I'm currently crying into a coffee mug that is filled with champagne.  YOU DID THIS TO ME!!!! *bawls harder* but I love you! @jameelajamil @IMKristenBell @dubjackharper @TedDanson @DarcyCarden @mjacint0", 'Hell yes brother nothing better than death wish coffee!!!thays for sure !!\nBA https://twitter.com/ZakkWyldeBLS/status/1088889119781019648\xa0…', "@voidvoice360\n.\nI still don't get how to properly take full body pics  so this'll have to do \n.\nBackground bricks and a cup of coffee.\n.\n\n. @ Atlanta, Georgia https://www.instagram.com/p/BtE6y0BHtRU/?utm_source=ig_twitter_share&igshid=1lwgwl0opt3f5\xa0…", 'My Saturday Morning: \n\nCrushing on a cute boy in Starbucks who’s having coffee with his parents wearing their matching “God is with me” shirts', 'Pandesal + mantikilya with coffee in da morning da best', 'Wish I could be sharing a coffee and a heart cookie with my girl @sleepyTaeillie pic.twitter.com/A5OexW9ZzO', 'じゃああれガバガバじゃん', 'I spend at least 30 minutes each morning watching our garden birds. Method: Make coffee, top-up feeders, sit back and wait, drink coffee, enjoy the show. Perfect start to the day. #RSPBBigBirdwatchhttps://twitter.com/silverpebble/status/1088770458965688322\xa0…', 'when she buys you coffee: ', 'Okay I like it make itt by hand grind my beans and make a very tasteful abd very strong coffee, delecious, as Jstn. he does it the same way.', 'Are you a coffee lover? Enter now for a chance to#WIN a Breville Bambino Plus! ARV $700 Can only #giveaway #CanWin http://www.howtosurvivelifeinthesuburbs.com/2019/01/cafe-quality-coffee-at-home-700-giveaway.html/comment-page-13#comment-269379\xa0…', 'You never know, you might meet me for coffee one day and check your wallet afterwards. ', 'It\'s called "My In-Laws: winter edition". It\'s Olive oil infused Kenyan iced coffee with vanilla bean syrup and cardamom and rose infused cream with mint.', 'This case has Sean, Sara, and Jimmy neck-deep in coffee beans trying to find a killer. http://getbook.at/coffee-is-murder\xa0… #mysteryseries', 'I’m zooted off ice coffee rn', 'GoodMorning , Coffee or tea ? ', 'Wake up naked drinking coffee,\nMaking plans to change the world\nWhile the world is changing us...\nIt was good good love.', 'Try HEALTHY Coffee, the only healthy coffee that allows you to have an addiction while improving your health! http://bit.ly/HealthCoffee', '@MrPeterAndre Dang, you could come to Great Yarmouth, and no coffee shop either. come to my house lol', 'Sylinder Photography: 5hrs of wedding coverage, 20pg hardcover coffee table book, and 60 hi-res files, all for a whopping $349 - #photogFAIL', 'RT @_LiteSkin_: In the morning, eating an apple will keep you awake better than drinking a cup of coffee.  #FreakyFact', 'gotsa wash faceeeeee, take tablets.. brush teeeeeeeth, no no coffee then teeeeeeth :)', 'Hilarious! RT @JenFriel: http://twitpic.com/zx03p - This is on the wifi welcome screen at coffee bean. Cracks me up!', "@MomOfKandJ Post meeting this week or next? Get the crew together. You bring cookies, I'll bring coffee. I'll do a demo on layer masks.", 'I checked in at Caribou Coffee (2638 Chapel Lake Dr) on #Yelp http://bit.ly/bQf65j', 'Sittin up in Starbucks, Coffee, Two Equal.', 'Coffee!', 'Iiiiiiiiii want some coffee cakes', "@missmarisol LOL!  Oh, I'm such a morning person. Actually, I'm an afternoon person... I'd already had morning coffee when I wrote that LOL!", 'Starbucks reduces coffee buying in Costa Rica, Reuters reports http://bit.ly/aBMceQ news socialmedia', 'New Blog Post: Hawaiian Kona Dark from RocketFuel Coffee Review http://bit.ly/chV2GA', 'Better late than never I suppose? (re: Caribou Coffee & oatmeal) http://tinyurl.com/yc6nvtr', 'Watching the STS-130 interview, drinking coffee and sock knitting.', "sooo is it considered a healthy diet if I just have coffee everytime I'm bored & hungry?", 'Prams, cots, bassinets, strollers, nappies, bugaboo?, babyjogger, mountain buggy? = Need coffee. Stat.', '@coffee_file @alemuccillo eu to sussa porque praticamente virei a noite e sai as 14:30 pra dormir a tarde toda #culpadecuehrola', 'The iced mochas at the eBay coffee bar are much better than Starbucks, despite being made with Starbucks coffee', 'Skitch is MAC only ... brain muddled no coffee yet!', '@lindaw HEY!  We also have coffee, beer, and bookstores!', 'After a coffee et motto finally at the way home wondering if i can make it tomorrow in time', 'Drinking imaginary coffee brewed by my daughter in her back porch cafe.', '2nd day at Zap. Love the 9am coffee and 12pm gym. Guys are great too.', 'coffee time!', 'Drinking coffee.', 'coffee shop hopping in boulder with the sis', 'Co-workers bringing in biscotti and pandolce is not helping me moderate my sugar intake. Or my coffee intake.', 'at work after another session at the gym this morning about to make a coffee', 'Coffee @ Dolores Cafe', '@miyori Got time to meet at Tiger Tiger this morning for a coffee? Or you not in the city today?', 'Drinking coffee after midday', 'early am coffee and email', 'drinking the morning leftover coffee over ice. Gonna be a long night.', 'Taking a break at Coffee Bean.', 'Need coffee.', 'Sitting outside at a coffee shop with free WiFI. One of the nice things about running a web company.', '"I would be a pink shirt-wearer to be able to enjoy the sprinkled, pink-frosted donut of your love!" Clearly I\'ve had too much coffee today.', 'Coffee and TV', 'Watch an Iowa Coffee House Owner Toss a Group of Occupiers Out of Her Shop http://www.theblaze.com/stories/watch-an-iowa-coffee-house-owner-toss-a-group-of-occupiers-out-of-her-shop/\xa0… via @theblaze', "Man asks me where the best place to get a cup of coffee was then asks me if I'd like to get a cup of coffee with him. #worstpickuplineever", "Happy New Year, GMTers! I shall start the year as I mean to go on - where's the coffee?", '@coffee_kobo明けましておめでとうございますm(__)m \n\n富士とか、鷹とか、茄子とかはまったくでてきませんでした・・・。\n\nこちらこそ、よろしくお願いします！', '@MightyMarv69 , your fucking too young for coffee bro (y)', 'That is a coffee straw in his mouth cool #notarizedBET', 'Interior Design:  Modern, open-plan living: Norman Cherner chairs + Noguchi coffee table http://goo.gl/fb/nSNoF\xa0', '@Coffee_and_TT happy new year babe xxx', 'coffee coffee coffee!!!!', 'HAVE A HAPPY & HEALTHY NEW YEAR FROM ALL OF US AT THE COFFEE N BAGEL CONNECTION', 'How do you measure a year? In daylights, in sunsets, in midnights\nIn cups of coffee, In inches, in miles, in laughter, in strife...', "Just made Dunkin Donuts coffee with my new French Press! Yummy. And a slice of cheesecake to go with it. I'm a happy girl!", 'ipoh white coffee (d last sachet) with cream-o biscuit as my breakfast.', 'Are you tipping more for coffee this month?', "you know you're getting old when you have to have a cup (or three) of coffee just to make sure you can stay up til midnight #sleepyalready", 'My family is addicted to coffee!', 'Mmmmm Rituals coffee :D', 'May your year be filled with good health, good friends and great coffee! Sending you all our very best wishes in... http://fb.me/YBX2BsHi\xa0', '@iMorganP So when are you sending us some coffee beans? Lol', 'you know what, I have never actually gave coffee a try before lol', '@ElaineMcCluskey was gaining from 1-4AM, bare driveway & cars. Stepped in for Coffee, returned to this in 30min " https://twitter.com/NSRasta/status/578163736042708992\xa0… "', 'Vans Sk8Hi Reissue CA (Leather Black Coffee)Size 8 Rp 925.000 pic.twitter.com/LYeNCWXHf9', "A group of rich white men at @Starbucks need to remind me of being 2nd class on my iced coffee? I'll take my ethnic money elsewhere.", '@Professor_Rambo @SoulRevision teenagers and college kids to talk about race with people over making their coffee, when most people at that', "I'm at Starbucks Coffee 八重洲地下街店 - @starbucks_j in 中央区, 東京都 https://www.swarmapp.com/c/cirCJS4fQzu\xa0", 'Smooth dude, chat at a coffee shop and ask if she wants to go for a walk. ', 'Messy hair. No makeup. Tons of coffee in my mouth kinda day.  https://instagram.com/p/0Y2s89TEcz/\xa0', 'shut up and give me my coffee #RaceTogether', '@amymitchll @my_shnanigans @KarlaMNL @juanstie @D20144682 in addition to my Kurig I have the Nespresso machine! That makes great coffee also', '@Vocalpoint @ILonaB1980 @ItsFreeAtLast  Mine is usually a cup of tea or coffee', 'CNN: Coffee is practically a health food: Myth or fact? http://cnn.it/1zJaCla\xa0', "I miss having coffee dates. I don't think I ever had them, but I miss the idea of having them. #makessense", 'I like my coffee, how I like the news stories about racism. Black with six shots of espresso #RaceTogether @Starbucks', 'Headed home from ATL wondering when Caribou Coffee will catch on in Athens. . (Probably never) Love… https://instagram.com/p/0Y2v68my--/\xa0', "Seriously regretting 3 cups of tea and a coffee before bed. I'm wide awake and pissing like a racehorse.", '.@monicaisliberal I have only had coffee from a Starbucks 2 times in my life. Not into 4 dollar cups of coffee', '>> shop. As she ordered, she waited as the friendly barista made her coffee. Grabbing her coffee and muffin, Diana slipped on> @FabledFate', "@tqomso Expresso... is that what you get when you order coffee from McDonald's?", 'Breakfast with coffee, and reading @ecomso on Entrepreneurship & Startups ;7', '#McDFrozen coffee go ham', 'おはようございます。@FMksk @pixy_cbr1000rr@JapanshopYukari\u3000@OgawaMotors @volvo2k\u3000@coffee_t＠hiro96fxstdi03 @jp2via @pockemaspeka\u3000@KONGO5055IGA', '@kayuetwhitford ya betta off cutting the coffee out all together if ya watching ur calories #justsaying x', 'Every morning when you go to Starbucks to get coffee, I be at the bank like get this cash off me! #JokerTooCold #Classic', 'Everyone is just angry today. Yall need some coffee smh', 'Coffee is horrible', '“@DCertainLee: Damn my manager need to hurry up and get here I gotta take a mean shit coffee messed my stomach up” Lmpbo!!!! #grossbutfunny', 'Why I go or why they have a coffee shop?RT @BeautifulWreck2 If you go to a church that has a coffee shop could you please explain to me why?', 'I probably smell like cigarettes and coffee now.', 'Half an hour until I sit my biology exam. Then I want mac and cheese and coffee and more studying. Anyone wanna hang?', "@amandahawk Can't wait for you to get back and tell me all about it! Really, I just want an excuse to drink coffee =)", "@holdfast1979 LOL you're funny. No but Peet's coffee and tea makes a delicious vegan choco chip cookie! It's like crack....in a good way", 'Apparently today was a Jimi Hendrix day in downtown Philly: heard "Purple Haze" in a bar and "Gypsy Eyes" in a coffee shop. Pretty great.', 'RT @EDIYA_COFFEE: 새로워진 이디야 홈페이지를 말하다! 이디야커피 트위터를 follow 하시고, 총 270분께 드리는 어메이징 이벤트 소식을 RT하시면 매일 5분을 추첨하여 이디야 음료교환권 2종& ... http://dw.am/LWCt3', '@revtodd we still on for coffee?', 'あ～なんともこそばゆい感じ、言語の壁？RT@marueiwob:いいのだ。突然血迷ってこそボウイなのだ！ RT @coffee_and_tv: そしてデヴィッド・ボウイが日本語で歌うと上田正樹になる http://youtu.be/kZonQzR5kmg\xa0', '#ChildhoodMemories playing drums on the coffee table', 'Hot on Spot: Starbucks Coffee Co was just wishlisted in # # via @SpotTeam', "Today's coffee!! 蒸し蒸し天気 http://yfrog.com/h0xrkcpj", 'Free drink from The Coffee Bean TODAY! <3 http://bit.ly/bgAJBy', 'I slept a lot today. Now for some coffee. Thank god the baby still sleeps a lot.', 'At Clark and Lake, Santa and his minions are giving away free Starbucks ground coffee in front of ABC 7 news. ', "thinking i'll head down and crash the silly rails camp in san jose after i figure out how to get this heavy indian coffee table out of the car.", "you know its time for another coffee when you're writing infinite loops", 'drinking a cup of coffee', 'waking up with twitter and coffee, oranges and a yawn; damn, again some 6 hours only!', "You've gotta be smarter than the coffee maker", 'Horror of horrors! Im out of coffee! Off to the store for me!', "I can't decide if I need more water or more coffee. I need the lift, but I'm getting dehydrated... Stuff it, I got one of each", 'getting a jittery from the coffee I just made for the office. I think my coworkers are feeling it too', 'Craving coffee', 'I am having a coffee.', "Missed out on free *real* coffee at the stop because the tram was already there. I'd pay for that if we had it every day but once a month is cool", 'coffee? drinker? meee? noooooo', "haven't eaten in 24 hrs, except for a bite of banana. tempting fate with orange juice AND coffee. Feel good for the first time in two weeks", 'Coffee & wifi in Hackney. Sun sets at 4pm in London. Not missing 2.0 in the least.', 'I love coffee', "Enjoying a Coffee Coolata from Dunkin' Doughnuts", 'drinking coffee and a having a twix for breakfast... its a rainy day here so it sucks', 'Waking up. Getting my coffee and searching for my smokes.', 'I think this is the day that I fell in love with coffee.. Thank you… https://www.instagram.com/p/BHTEYoajYS3EUZjooxhmCk-N1U_4XQnCNexW5E0/\xa0…', 'Cold Brew Coffee Success - http://eepurl.com/b79wp1\xa0', '@ everyone who thinks Sonya and I are dating would you like to meet my boyfriend and tell him your theories over a nice cup of coffee', "But what kind of coffee, Emily? We've got what ya need!", '@rockstarenergy coffee & rockstar baby way to go', "People next to me at coffee shop are trying to make jokes. That's like trying to make a beat on your phone when you're next to Mozart. Smdh.", 'I will bring you coffee and your birthday present that mooorning!!', 'Time for a strong one...\n#coffee #Ballaratpic.twitter.com/2tPmrrKcWm', "If my favorite place to get coffee wasn't awesome enough already, they play @MitisOfficial @themahiofficial and @RunCryWolf even!", 'Or buff the right coffee?', '@Cheshire_Custom for all your coffee needs pic.twitter.com/OXbNFK5OuY', 'Someone bring me coffee plz', "I think it's hilarious that my pee smells like coffee after I drink coffee.", 'I am absolutely confident I could live on a diet of @JellyBellyUK but just not the marshmallow, coconut, coffee or banana ', 'Good Morning!!\nJuly na Pala. \n#coffee #ciggs https://www.instagram.com/p/BHTER9KBvvP/\xa0', 'forget love, fall in coffee.', 'Wow mcdo. I ordered a saussage mcmuffin. I get it with egg. I order coffee. AND YOU ONLY GIVE ME ONE PAIR OF CREAM AND SUGAR!! Whyyyyyy ', 'T-shirts are here! \nhttps://shop.spreadshirt.ca/unity4canada\xa0 \n(Coffee & beer mugs, and phone cases, too. More... http://fb.me/2ZMSJNE21\xa0', "Need to study but I'm sitting here in my scrubs drinking coffee to stay awake instead ", 'Nice hop nose, good bitterness with a good coffee flavor on t... (Death Wish Nightmare IPA) http://untp.beer/s/c329873439\xa0 #photo', 'elu yg kurang kerjaan gal haha RT @galuhfitri: Kerjaannya @roroannisa mcflurry caramel dicampur sama mcflurry coffee terus dikasih teh botol', '1st Qtr underway  Fitz won toss defere to 2nd Half  Coffee starting on Offense', '@themattpipkin I actually a getting coffee now. Mmmmmmm', '@feflie coffee is baaaaad', "Hey coffee shops! Don't charge extra for soy milk. Go to a grocery store and you'll see it costs the same (sometimes less!) than cow's milk.", 'Coffee!', "@kkellomod luv ur pic! Don't ask what am doing up at this ungodly hour, too much coffee!", '@inthenow Hopefully it smells of coffee now...', "Oh gosh it's times like these I wish I had a boyfriend I could send out to MacDonalds / make get coffee for me #toomuchchampagne", 'Woke up at 9.30 and they are gone :( heading out to have coffee later ^^', '@BonniesBows  I only suck before coffee.....  LOL', 'I asked for a large coffee, and the nice lady at the cash understood! #EnglishWins!', "I'm at Day Leaf Coffee. http://4sq.com/bizHxQ", "girl in my anthro class asked if we could do coffee & theory-talk before next paper; she's confused & i make good clear points in class.", "Beer before coffee today. Believe me when I tell you it's rare.", 'RT @11thStrtCoffee: Today, 9/17/10 is FREE COFFEE FRIDAY. RT to win $50 of coffee.  K-Cups--lowest prices online. www.11thstreetcoffee.com', 'Just had coffee with @BrandyKuentzel - everyone needs a Brandy in their lives, she brought me chocolates and a card - so thoughtful!', 'Thx for the follow @juliagillard - if you ever want to have a coffee & talk marketing or the arts, feel free to drop me a line! :)', 'Husband has a flat tire. I got coffee on my new shoes. Fffffff my life. :(', 'Hmmm. Was a No-Fun day on the coffee side of things. Nonfat milk, decaf coffee, sugar free syrups... interesting...', 'I have Coffee Tree on my island! Now my island is even more awesome! http://gigam.es/htw_Tribez\xa0 #android, #androidgames, #gameinsight', '@rosariocrocetta OK! Domani iniziamo bene Coffee Break insieme a Crocetta davanti alla TV e poi tutti a Mondello!', "where's my coffee kid? i could use a coffee kid", "@GiangrandeT  that's funny because i'm broke because of coffee", "120 naked volts on the coffee table. Don't touch the electric wires. http://instagram.com/p/YEG0_9KqPC/\xa0", 'Seeing sounds from all of this coffee today. ', 'Best Coffee Shop In Thailand: WIFI, Service, Seating, Coffee http://is.gd/5qfJq5\xa0 #thailand', 'No Peddling in front of Ohio House Motel Coffee Shop http://flic.kr/p/9BAHGF\xa0', 'Photo Message Gifts #LeeHillerDesigns on #Amazon http://bit.ly/LeeHillerPhotoMessages\xa0… Cards #Mousepads Mugs #Coffee Basket etc', 'Bout to make a dope cup if coffee http://instagram.com/p/YEG_C_SWvw/\xa0', 'associate brand manager, Digital & Social Media Communications at Starbucks Coffee Company (Toronto, ON): Titl... http://bit.ly/130p7CW\xa0', '@coffee_man3 頑張って下さいね(^-^)', 'Coffee time<3', '@chedz007 Bacon and eggs will do. Coffee plain black thanks.', "@kilby76 :-) One day friend, we're going to have a coffee or bourbon IRL. Mark it down.", 'Free yogurt and free coffee in one day #dontmindifido', "@itzyfitzy13 I'll grab you some beans if you like, a coffee would get all cold and consumed before I made it out the other side of the lake", '\u200f\u200b\u200f\u200b Pending Coffee !! ا http://s.v22v.net/l52\xa0 \u200f\u200b\u200f\u200b  \u200f\u200b\u200f\u200b      \u200f\u200b\u200f\u200b \u200f\u200b\u200f\u200bسلوكيات غربية جميلة ♡.', 'Ang import ng San Mig Coffee na si Denzel Bowles ay magiging guest sa AKTV Center ng PBA ngayong araw sa AKTV sa IBC 13', 'Do you know this excellent coffee? http://www.hehenberger.organogold.com\xa0', "Except, I don't drink coffee lol", "Trying to stop drinking coffee after a 4 coffee binge day on Tuesday. It's coming up to 48 hours and my head hurts :(", 'Cup of coffee number one, check. Number two and three, on their way... #finalsweek #toomuch', 'You want some coffee? How do you take it? Black? Couple cubes of kiss my ass?', 'Here we go. New tin of coffee. Come on #Monty #ashes #adelaide', 'Breakfast with coffee, and reading @ecomso on Entrepreneurship & Startups ;6', 'Ponkan and Coffee for Breaky ! :)', "I don't wanna drink this fucking coffee", "When the world ends I'm pretty sure I'll have a cup of coffee gasped tightly in my hand.", 'I need some coffee.', 'Someone bring me coffee while I await Alessandro at the salon pls', "I shouldn't be drinking coffee .", 'Black Coffee - Lacy J. Dalton http://rdo.to/KRTYIR\xa0 #nowplaying #listenlive', 'Good day coffee in this morning', 'Even though snowed in. I have my son, my amazing boyfriend, endless cuddles & coffee. I am blessed. <3', 'And some lady just spilled coffee all over me. This day sucks.', 'Coffee with @mrs_peeps before going to @ReachTFA tonight! #goodnight', '@TwiceDiabetes @HenshawKim This annoyed me this morning as wanted to grab a coffee on arrival.', 'RT @anGGadrumaholic: #kopdarTACI BANDUNG 2nd Episode | Kamis, 5 Des 2013 @ KFC Coffee Jl.Setiabudhi/Karangsetra Jam 16-18 | Bahas Gathering', '#ConfessYourUnpopularOpinion I think coffee and tea are gross.', "Day started very bad when a travel mug of coffee teetered over and spilled splashing the novel :(  I'll need to buy a 2nd now for my Library", "so full {of turkey and stuffing and mashed & sweet potatoes and pickles and pumpkin pie and coffee} Yay for the somerville's!", 'Having a cup of coffee. Life is beautiful.', 'Gas is 30 cents cheaper/gallon in DC than in SF. But a Starbucks tall coffee is 30 cents cheaper in SF than in DC. Supply side economics?', '@aprilnel Oh no! What happened? Coffee tomorrow?', '@jordanbrock thanks mr coffee pimp, I see that stock your brand :) looks good actually had coffee from there before', 'ran out of coffee - forces me to grocery shop on a weekday', '@PJ_NYCdogmom Yes, brown sugar and brown coffee filters rock.', 'excited to be a part of the healthy coffee and tea business: www.iKatsCoffee.com', '@lalisa Yes I do!! It was an awkward funny moment when we met that one sunny day at coffee bean and tea leaf.', 'Just had a coffee wtih @alexanderb & DanCol. Was good to see him, especially in shorts :P', 'Having a "Chai Charger" at Roast Coffee Company http://is.gd/40Hn', 'today: buy coffee beans and aprons/smocks. tonight: clay class and Spearhead', 'Tues 1am shift a bloody nightmare. Thank f**k for coffee. Challenging behaviour all around sigh', "back from Baltimore [finally; 8.5 hours to get home, wtf]. Off to Mike C's for some poker, then 6am Spot Coffee.", 'is drinking coffee and reading the news. Morris likes his new home!', 'email phone coffee PIZZA!!!! email email coffee water . . . damn been forgetting about water all day. . . guilt trip, water PIZZA!! water', "@merejames - But that's 14 minutes less to drink your coffee and read the paper!", '1.  New coffee mug makes me happy (I use it everyday) from http://shurado.etsy.com ...', 'Coffee date! :)', '"Coffee (n.) a person who is coughed upon" (via @CoryBooker)', 'RT @toptentopten: Take a break from your hectic day, grab a cup of coffee or tea and go to your happy place at http://www.toptentopten.com/.', "The dude that just made my coffee acted like it was a peice of art. Dude, it's milk, coffee shots, and ice in a plastic cup. Chill.", 'just ordered Chinese...hoping to get out tonight, at least for coffee and a chat', "Awk-ward. Two chicks clearly on a coffee date were just interrupted by another chick. By the reaction, I'm guessing it was an ex.", '@Murfbsurfn78 Nothing beats coffee perculating and bacon frying on a coleman stove #Nascar', 'At Hotel St. Michel waiting for the Coffee House Gypsies to start playing.', '@ Cup A Joe, a café in Nob hill (Leavnworth and Sutter) with good real coffee! talking about blogging with @mlmassieux', "Where's best dessert/coffee place in Broad Ripple? Concert hasn't started & I'm already planning post-event snackages.", 'having coffee in the middle of the rain', 'Take a break from your hectic day, grab a cup of coffee or tea and go to your happy place at http://www.toptentopten.com/.', 'I predict that bro. Fisher will drink 70 gallons of coffee and eat 20 lbs of donuts over the summer...watch the weight, u have gym to teach!', "Another day with not enough sleep. This time had 3 1/2 hours. I'm getting too old for this. No amount of coffee can ready me for today.", 'Coffee and re-starting the new project....', "@Naina lol yes. Have been following their work! I'm ready to become their coffee girl if that's what it takes to see how they work too.", '@Krista_Marie85 A coffee latte machine?', 'Gak rugi nemenin @mrshananto shooting pagi2 utk TVOne. Abdul n Coffee Theory LIVE! http://mypict.me/2JES', '@Halcylon ahahah get your own coffee maker + dunkins.', 'Say this out loud to yourself: "Coffee of cup, wine of glass." Sounds right, doesn\'t it?', "Been computerizing all day—ready to switch things up. Nap/coffee/cocktail/bath/house mag porn/junky TV—can't decide. Maybe all?", '"began" is the new vegan according to the iPhone when tweeting. Friday coffee at chance of rain is yummy & relaxing (reading Calvin & Hobbes', 'Shooting in Oregon with Kevin Kunota..... I spilled coffee on my pants :(', 'Tony from Liverpool just shared their favourite Fair Trade product at http://tinyurl.com/37mdew - Coffee, I love coffeea nd like the ide ...', 'Ah afternoon coffee! Soon I must go to refill the poop monster', 'Three cheers for Saturdays, cartoons, coffee and laptops in bed', 'Elan from Swansea just shared their favourite Fair Trade product at http://tinyurl.com/37mdew - Cafe direct caffinated coffee has to be  ...', 'Montse from London, UK just shared their favourite Fair Trade product at http://tinyurl.com/37mdew - Coffee - tastes great and fairtrade ...', "JASON!!! that's not true! Did you drink coffee today?!!", 'In Starbucks coffee', 'Still without coffee.', '@slolee sorry for the late response, I have a very talented friend who is going to give me training, payment in coffee and food :)', '@imelda - what kind of food at the coffee groundz? is it decent?', 'Coding outside a coffee bar, with a power outlet and wifi, and an overhead heater...One cigarette and this would be Nirvana.', 'coffee+hangover=no more hangover', "Fresh CityMama Hot Links for 2/22/08: PSA: Where's the beef? Over coffee this morning, J. .. http://tinyurl.com/3ypas4", "ok, i just had a very large americano coffee and i'm dead sleepy!", 'i have coffee.hols 2morrow', 'on flickr » discuss Coffee quips from some famous females http://tinyurl.com/27xsgz', 'yana and are going to have a awesome night spending time together haveing a cup of coffee @ Caribou Coffee.', 'going out for a surprise coffee with @jmspool in a few minutes. cool!', '@Harry_Styles\nhow did the hipster burn his tongue?\nhe drank his coffee before it was cool!\n\nplease follow me harry, i love you 3165', 'Stumptown Coffee Roasters!', '@Thumpa_ -- for way cheaper and they actually taste better imo.. I know that actual Starbucks burns their coffee beans on the reg and the --', '"Sakaryaya gelmeyeli buralar çok güzel olmuş. Antalyadaki David Peop..." Foursquare Tip @ David People Coffee Sakarya http://4sq.com/1o4RdFm\xa0', '#poemstore #seattle #coffee http://instagram.com/p/q-UwYlq5rX/\xa0', '@Harry_Styles\nhow did the hipster burn his tongue?\nhe drank his coffee before it was cool!\n\nplease follow me harry, i love you 3164', 'what day is today???? idk and idc i just want to have a coffee + tumblr', '@Harry_Styles\nhow did the hipster burn his tongue?\nhe drank his coffee before it was cool!\n\nplease follow me harry, i love you 3163', 'I just tried putting a Fantale in my coffee, expecting something blissful, ended up with a mediocre coffee with a sticky mess on the bottom.', 'Welcome to Huronia Regional Centre - “Welcome.” “To start your experience, please help yourself to coffee,... http://tmblr.co/ZA48gv1MgiQYm\xa0', 'Cocaine and coffee', 'Check out Thermos 16 oz Vacuum Insulated Travel Coffee Mug Tumbler Clip Handle Plum White #Thermos http://www.ebay.com/itm/-/390894809194?roken=cUgayN\xa0… via @eBay', "I've had like 12 cups of coffee, I need to stop", 'Waiting for coffee to get to 38 degrees. True #coffee nerdom at reformatory caffeine lab pic.twitter.com/AwTn7f6pJw', '@Harry_Styles\nhow did the hipster burn his tongue?\nhe drank his coffee before it was cool!\n\nplease follow me harry, i love you 3162', '@Zack_Ratliff I thought I could fly. I was wrong. Long live coffee table.', 'Going to Amsterdam on Friday, can anyone recommend any awesome coffee shops? :)', '@babyangel115 I thought them Green Coffee + Raspberry Katone were the best', 'Pretty sure @coffee_n_mtns is my spirit animal.', 'I had too much coffee yesterday.', 'Morning coffee + Psychodiag = breakfast zzzzz', "@HandbalLOVE5 @nelsonpiquet da się? można? ;) coffee is good for everything. greetings from Poland, it's 2am here #piquetfan4ever", 'Coffee cake pro', "@foodlatio There's a guy who I always see rollerblading down the street with a hot coffee and his dog. It makes me extremely nervous.", '#Starbucks #Coffee #Cinnamon powder#Moscovado#Sugar#My life  @ Cavalry Hills http://instagr.am/p/OpkcF7NM8h/\xa0', "amazing! TELL HER HI FROM ME! RT@itsbrittny @laurendubinsky there's a girl sitting in front of me at the coffee shop reading @goodwomenproj", 'Want some cup of coffee... Sleepy...  @ VXI Global http://instagr.am/p/OplB3hDW4d/\xa0', 'I just reached Level 2 of the "Fresh Brew" badge on @foursquare. I’ve checked in at 5 different coffee shops! http://4sq.com/NJ1Nlu\xa0', 'Coffee time (@ Cafe Becari) http://4sq.com/O38RdI\xa0', 'Coffee and a Salad. #dinner YUMpic.twitter.com/MdvQDsQg', 'Frappuccino!!!!! (@ Starbucks Coffee) http://4sq.com/Q0hQQd\xa0', 'I wanna go bim jus 4 esso! N an amaretto friscante from italia coffee shop! Ooo and Redd!', "I should be required to have coffee before I'm allowed to interact with the general public.", 'Hih... Aku punya nya kamu-kamu lagi nya the sister. Mao? RT @shofiii21: Siapa yang punya Lagi Lagi Kamu-nya Abdul & Coffee Theory? :$', '#maccafe con la viejita @nadiuscka! #instagirls #coffee #friends http://instagr.am/p/Opk-SHvJf0/\xa0', 'Tea > coffee', 'DONT PLAY WITH HOT COFFEE KIDS!!! pic.twitter.com/Xqg4Vmgv', '"when my road is ended old friend, one of my important wishes is that my descendants will remember my greatness" - morning plain coffee.', "@kaylamartinn_ haha. Thats true, but try to drink some coffee tomorrow morning, that'll wake you up.", 'I need to make an updated printed portfolio and just go to coffee shops and show off my work to hot girls. Haha #goodideas', 'when they play the Moana soundtrack in the coffee shop lol', 'Bitch. I need an iced coffee.', 'MOL *watches Mom choke on her coffee* #fbjam', '"How…we met?" He scratched his chin whilst thinking.\n\n"We met for coffee.. We had coffee in this…little cafe near the park."', 'でも先にaloha COFFEE labでまさかのおふたりにはお会いしてたのもなんか笑えました♡♡今後もよろしくお願いします(ᐥᐜᐥ)♡ᐝ', 'Black House Coffee Stout Nitro from Mighty Kitchen #foodporn #drinkporn #beer #coffee #stout #nitropic.twitter.com/udONZEjTQt', 'You get ready, you get all dressed up to go nowhere in particular. Back to work or the coffee shop.', 'Breakfast with coffee, and reading @ecomso on Entrepreneurship & Startups ;6', '#MondayMorning #Monday #coffee pic.twitter.com/2C6tMHCa5F', 'Never burn bridges. One day they might bring you coffee when you work at 630 in the morning.', 'cold coffee is philinda af\nand consider aos team + team by lorde', 'Sunday Morning Coffee Love (Evening\xa0Edition) https://drinkswellwithothers.wordpress.com/2017/02/19/sunday-morning-coffee-love-evening-edition\xa0…', 'Monday to do list -\n \nDrink coffee \nWalk the dogs \nContemplate mowing lawn \nBring laundry in \nSleep on the beach \nDrink beer \nHave breakfast', 'WHY THE FCK DOES MCDO LA PURISIMA ALWAYS SEEM TO NOT SERVE ICED COFFEE EARLY IN THE MORNING?! KAPE YUN KAPE! BAKIT WALANG KAPE SA UMAGA?! ', '내일(화)은 네덜란드튤립농장 새로운 싱글앨범이 나오는..\n#오래기다리셨습니다\n#기다려라볼빨간사춘기\n#야호 @ Sakura Coffee Roasters https://www.instagram.com/p/BQtmXJAgyHB/\xa0', "I've got as much sleep in me as a jar of coffee has, bowl of cereal and a film it is, followed by more tablets", 'Almost Heaven desserts and coffee shop is my new favorite place.', "***DROOL*** \nPeanut butter coffee with whey protein! \nI'm dying. This is the best thing I've ever tasted.\nThis is your fault Brad Zygarlicki", 'I just entered a Prize Giveaway! - Matcha Flavored Coffee! on http://fishbowlprizes.com\xa0 http://www.fishbowlprizes.com/giveaway/4553/matcha-flavored-coffee!/\xa0… #win #Fishbowlprizes', 'How cool! Have you entered to #win a @GetDripo #coldbrew #coffee maker in @SahmReviews 2016 Mega #Giveaway? #java https://wn.nr/P6GYQB\xa0', 'El Salvador Coffee Cupping @ Campesino Coffee House today October 12th 6:30pm http://fb.me/E6ah6TBa\xa0', "That's almost as bad as brushing your teeth and then taking a big swig of your coffee 5 minutes later", 'Totally just spilled hot coffee all over my arm but at least I have an arm to spill hot coffee on, right?', 'Come over to my house and drink coffee while I complain about gardening. <3', "I'm the biggest coffee feen lol", 'good morning to everyone esp to dunkin donuts (the real winner today) for their buy 1 take 1 iced coffee ', "good morning now where's my #coffee pic.twitter.com/CVPtKZ7qDv", 'Give me coffee.', 'Good coffee flavor, ends kinda light. Nice hints of chocolate too. - Drinking a Thunderstruck Coffee Porter - http://untp.beer/s/c514397279\xa0', 'Sad pizza and coffee for dinner while I do mix set ups for the C list equivalent of Creed', "#read and #drink some #coffee to relax\n\nAnyone interested in purchasing this #book #wonder I'm… https://www.instagram.com/p/BaKtKvvF9PR/\xa0", 'Fall Coffee Mug | Halloween Coffee Mug | Mom Gift | Cute Coffe by CountrysideVinyl  http://etsy.me/2xC7QVg\xa0 via @Etsy', 'Goddamn honey child Gotsta have dat Coffee! Haveing one now as a matter of face!', 'Coffee and @GreysABC are my kind of nights. #TGIT', 'Love to. Let’s do it! I’ll bring the coffee cake that I made for you and @MissRobinAustin. ', "We have nice coffee here, so it's less of a challenge for us in a way ;)", '「コーヒー」「Coffee」と書くより圧倒的に\n「珈琲」の勝ち。かっこいい。', 'freshman year: 8 hours of sleep \nsophomore year: 6 hours of sleep\njunior year : 4 hours of sleep \nsenior year : WHERES THE COFFEE', 'Thaks  McD for always preparing affordable working space and coffee for me everywhere and… https://www.instagram.com/p/BaKtIkWAOyr/\xa0', 'Barista:" So how do you like your coffee?"\nFives:"As dark as my soul."\nBarista:"One glass of milk coming up."', "The guy can't run a coffee shop and thinks he can run the Great USA? Delusional is not a strong enough word for this level of insanity!", 'I just had a whole 30 ounces of coffee what are u gonna do abt it', 'My wife is on summer vacation and already the knives in the rack are all in the wrong place, the coffee mugs are mixed with beer glasses and the utensil drawer is chaos. Pls help.', 'Would him running trigger conservatives more than their Starbucks paper coffee cup not being "Christmasy" enough for them? If so, give me a big steamy mug o\' conservative covfefe tears. ', 'the smell of coffee uhhuhh', 'I live for vanilla iced coffee', 'It could have been worse, I dropped a full cup of coffee on the new carpet in the old office on Reservoir.', 'Totally stole @siegel’s coffee pic.twitter.com/WQL1daFfc9', 'A good boy', 'Philz Coffee : 26b0dbdf-8bda-4ebe-865a-81fd4d4534db', 'Drinking coffee with Lemon', 'And while he\'s being a "coffee boy."', 'Coffee waste is now fetching a 480% premium over coffee itself https://bloom.bg/2JcE58k\xa0pic.twitter.com/xhUjLIcclK', 'The owner of the coffee shop next to my office has just figured out that hip hop uses samples and is very very angry', "Isn't he the guy that arrests poc for sitting in his coffee shop?", 'Oh hello there. Get me coffee and we can talk', 'Looks like coffee is going to be my new best friend tomorrow at work', '@KiberMoon science channel. Coma I need coffee\n', 'I love this doggo', 'This reminded me of my first cuppa coffee(quadruple espresso) in the morning.']



    finalstats=[]
    finalstats.append(average_words(tweets))


    # print ("Average Number of words per tweet = {}".format(average_words(tweets)))
    words = getCleanedWords(tweets)
    # print("Lexical diversity = {}".format(lexical_diversity(words)))
    finalstats.append(lexical_diversity(words))
    #print (words)
    #print ("Top Words = {}".format(top_words(words)))
    # print(top_words(words))
    finalstats.append(top_words(words))
    #popular_tweets(tweets)
    # print(finalstats)
    cleaned_tweets = []
    for tweet in tweets:
        cleaned_tweets.append(clean_tweet(tweet))
    finalstats.append(sentiment_analysis_basic(cleaned_tweets))
    # print(sentiment_analysis_basic(cleaned_tweets))
    #clusterTweetsKmeans(cleaned_tweets)
    print (finalstats)


if __name__ == '__main__':
    main()

